// Inline template with nav items markup and ng-directives
script(type="text/ng-template", id="top-nav-renderer.html")
  a.relative(
    ng-if="!item.options.heading"
    ng-class="{ 'ico-link': item.options.icon }"
    ng-href="{{$state.href(item.options.sref, item.options.params)}}"
    title="{{item.options.text}}"
    md-ink-ripple
  )
    b(
      ng-if="item.options.alert"
      ng-class="item.options.label || 'label label-success'"
      ng-bind="item.options.alert"
    )
    em.ico(
      ng-if="item.options.icon"
      ng-class="item.options.icon"
    )
    span.link-text(
      ng-bind="(item.options.translate | translate) || item.options.text"
    )

  ul.nav.nav-subnav(
    uib-collapse="nav.isCollapsed[pIndex]"
    ng-init="nav.addCollapse(pIndex, item)"
    ng-if="item.submenu"
  )
    li.nav-subnav-header(
      ng-bind="(item.options.translate | translate) || item.options.text"
    )
    li(
      ng-repeat="item in item.submenu"
      ng-include="'top-nav-renderer.html'"
      ng-class="nav.getMenuItemPropClasses(item)"
      ng-init="pIndex=(pIndex+'-'+$index); inSubmenu = true"
      ng-click="nav.toggleCollapse(pIndex)"
    )

// START Top Navbar
nav.navbar.topnavbar(
  navbar
  dropdown-class="topnav-dropdown"
  role='navigation'
)
  // START Nav wrapper
  .nav-wrapper
    // START Left navbar
    ul.nav.navbar-nav
      li
        // Button to show/hide the sidebar on mobile. Visible on mobile only.
        a(
          href=''
          ng-click="app.asideToggled = !app.asideToggled"
          md-ink-ripple
        ).visible-xs.sidebar-toggle
          em.fa.fa-navicon
      // Search icon
      li.search-wrapper
        top-nav-search
      // Iterates over all nav items
      li(
        ng-class="nav.getMenuItemPropClasses(item)"
        ng-repeat="item in nav.items"
        ng-init="pIndex = $index"
        ng-include="'top-nav-renderer.html'"
        ng-click="nav.toggleCollapse(pIndex, true)"
      )

      // END Left navbar

    // START Right Navbar
    ul.nav.navbar-nav.navbar-right
      // START Offsidebar button
      li
        a(href='', ng-click="app.offsidebarOpen = !app.offsidebarOpen")
          em.fa.fa-lg(ng-class="app.offsidebarOpen ? 'fa-angle-right' : 'fa-angle-left'")
      // END Offsidebar menu

    // END Right Navbar

  // END Nav wrapper

// END Top Navbar
