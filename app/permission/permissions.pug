include /resources/angle/pug/mixins/form

.form-horizontal
  div(ng-repeat="(key, section) in perms.map")
    +label("permissions.{{key}}.TITLE")
      permission-section(
        prefix="key == 'pkg' ? key : 'permissions.'+key"
        map="section"
        has-columns="true"
        on-change="perms.areAllSelected()"
      )
  div.pull-right
    +checkbox("permissions.all.TITLE")(
      ng-model="perms.allSelected"
      ng-change="perms.toggleAllCheckboxes()"
    )