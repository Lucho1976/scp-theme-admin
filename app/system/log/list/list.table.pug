extends /resources/angle/pug/table-checkable

block headings
  th(ng-if="table.showUser").relative User
    sort(col="user")
  th(ng-if="table.showIpAddress").relative IP Address
    sort(col="ip")
  th(ng-if="table.showDescription").relative Description
    sort(col="desc")
  th(ng-if="table.showType").relative Type
    sort(col="type")
  th(ng-if="table.showDate").relative Date
    sort(col="created_at")

block columns
  td(ng-if="table.showUser")
    log-user(log="row")
  td(
    ng-bind="row.ip"
    ng-if="table.showIpAddress"
  )
  td(
    ng-bind="row.desc"
    ng-if="table.showDescription"
  )
  td(ng-if="table.showType")
    span(ng-if="row.target")
      a(
        ng-if="row.target.href"
        ng-href="{{ row.target.href }}"
        ng-bind="row.target.name"
      )
      span(
        ng-if="!row.target.href"
        ng-bind="row.target.name"
      )
      |  ({{row.target.singular}})
    span(ng-if="!row.target") -
  td(ng-if="table.showDate")
    a(
      ui-sref="app.system.log.view({id: row.id})"
      ng-bind="row.created_at"
    )
